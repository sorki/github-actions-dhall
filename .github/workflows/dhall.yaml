# Code generated by dhall-to-yaml.  DO NOT EDIT.
jobs:
  build:
    name: "GHC ${{ matrix.ghc }}, Cabal ${{ matrix.cabal }}, OS ${{ matrix.os }}"
    "runs-on": "${{ matrix.os }}"
    steps:
    - uses: "actions/checkout@v4"
      with:
        submodules: recursive
    - id: "setup-haskell-cabal"
      uses: "haskell-actions/setup@v2"
      with:
        "cabal-version": "${{ matrix.cabal }}"
        "ghc-version": "${{ matrix.ghc }}"
    - name: Update Hackage repository
      run: cabal update
    - uses: "actions/cache@v3"
      with:
        key: "${{ matrix.os }}-${{ matrix.ghc }}-${{ matrix.cabal}}-${{ hashFiles('cabal.project.freeze') }}"
        path: |
          ${{ steps.setup-haskell-cabal.outputs.cabal-store }}
          dist-newstyle
    - name: Install dhall
      run: cabal install dhall
    - name: "Install dhall-to-yaml &c."
      run: "cabal install dhall-yaml"
    - name: Check Dhall
      run: |
        export PATH=$HOME/.cabal/bin:$PATH
        dhall --file haskell-ci.dhall
        dhall --file self-ci.dhall
    - name: Check Dhall can be converted to YAML
      run: |
        export PATH=$HOME/.cabal/bin:$PATH
        dhall-to-yaml-ng --file self-ci.dhall
        dhall-to-yaml-ng --file ci.dhall
        dhall-to-yaml-ng --file example-defaultCi/ci.dhall
        dhall-to-yaml-ng --file example-defaultCi3/ci.dhall
    strategy:
      matrix:
        cabal:
        - '3.10'
        ghc:
        - '9.6.3'
        os:
        - "ubuntu-latest"
name: Dhall CI
'on':
  pull_request: {}
  push: {}
  schedule:
  - cron: "4 20 10 * *"
